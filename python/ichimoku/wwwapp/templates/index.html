{% extends "base.html" %}

{% block jscript %}
<script language="javascript">
	$(document).ready(function(){
		$("#submitBtn").click(function () {
			$("#wordtable > thead > tr").remove();
			$("#wordtable > tbody > tr").remove();
			var text = $("#submitTextBox").val();
			var chunks = splitIntoChunks(text);
			var merger = new ChunkMerger( 
						function(chunk){
							populateTable(chunk);
						}
					);
			chunks.forEach( function(chunk, index){
				$.ajax({
					type: 'post',
					url: '/',
					data: { "text" : chunk, "word" : 1, "reading" : 1,
							"definition" : 1, "sentence" : 1 },
					dataType: "json",
					beforeSend:function(){
					},
					error: function(jqXHR, textStatus, errorThrown){
					},
					success: function(result, textStatus, jqXHR){
						merger.addChunk(index, result);
					}
				});
			});
		});
	});
</script>
{% endblock %}
{% block body %}
{% include "header.html" %}
{% include "header_band.html" with linkAnnotate=0 %}
<h4 style="color:gray;">Enter a text to annotate</h4>
<div><textarea name="content" rows="5" cols="80" id="submitTextBox">ある日の暮方の事である</textarea></div>
<table style="padding:5px;"><tr>
	<td style="margin-right: 20px;"><input type="button" value="Annotate" id="submitBtn"></td>
	<td style="margin-right: 20px;"><input type="checkbox"/>Reading<input type="checkbox"/>Definition</td>
</tr></table>
<div id="submitStatus"></div>
<table id="wordtable">
	<thead>
	</thead>
	<tbody>
	</tbody>
</table>
{% endblock %}